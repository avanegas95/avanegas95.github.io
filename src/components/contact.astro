<section id="contact" class="py-24">
  <div class="max-w-xl mx-auto text-center">
    <p class="text-[var(--sec)] font-mono mb-2">03. What's Next?</p>
    <h2 class="text-4xl md:text-5xl font-bold text-[var(--white)] mb-4">Get In Touch</h2>
    <p class="text-[var(--white-icon)] mb-12">
      I'm currently looking for new opportunities. Whether you have a question or just want to say hi, I'll try my best to get back to you!
    </p>

    <form
      id="contact-form"
      action="https://formspree.io/f/mnnjznkj"
      method="POST"
      class="space-y-6"
    >
      <div class="flex flex-col gap-6">
        <input
          type="text"
          name="from_name"
          placeholder="Name"
          required
          class="bg-[#112240] text-[var(--white)] px-4 py-3 rounded border border-[var(--white-icon-tr)] focus:outline-none focus:border-[var(--sec)] transition-colors"
        />
        <input
          type="email"
          name="reply_to"
          placeholder="Email"
          required
          class="bg-[#112240] text-[var(--white)] px-4 py-3 rounded border border-[var(--white-icon-tr)] focus:outline-none focus:border-[var(--sec)] transition-colors"
        />
        <textarea
          name="message"
          placeholder="Message"
          rows="6"
          required
          class="bg-[#112240] text-[var(--white)] px-4 py-3 rounded border border-[var(--white-icon-tr)] focus:outline-none focus:border-[var(--sec)] transition-colors resize-none"
        ></textarea>
      </div>

      <button
        type="submit"
        class="px-8 py-4 border border-[var(--sec)] text-[var(--sec)] rounded hover:bg-[var(--white-icon-tr)] transition-colors duration-300"
      >
        Say Hello
      </button>
    </form>

    <div
      id="form-message"
      class="hidden justify-center items-center mt-8 text-[var(--sec)] text-lg"
    >
      Thanks for reaching out! I'll get back to you soon.
    </div>
  </div>
</section>

<script>
  const form = document.getElementById("contact-form");
  const formMessage = document.getElementById("form-message");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(form as HTMLFormElement);

    try {
      const response = await fetch((form as HTMLFormElement).action, {
        method: "POST",
        body: formData,
        headers: { Accept: "application/json" },
      });
      if (response.ok) {
        (form as HTMLFormElement).reset();
        form.style.display = "none";
        formMessage?.classList.remove("hidden");
        formMessage?.classList.add("flex");
      } else {
        const data = await response.json();
        console.error("Error response:", data);
        alert("There was a problem sending your message. Please try again.");
      }
    } catch (error) {
      console.error("Error:", error);
      alert("There was a problem sending your message. Please try again.");
    }
  });
</script>
